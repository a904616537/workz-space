webpackJsonp([7],{G4Eo:function(t,s){},"mnA/":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});i("cwe7"),i("+BTi");var e=i("2X9z"),a=i.n(e),n=(i("7+uW"),i("NYxO")),o=i("gyMJ"),r=i("mWYR"),c={name:"workspace",data:function(){return{slideValue:0,input:"",dialogShare:!1,dialogVisible:!1,data:{photos:[],provider:{avatar:""},address_zh:"",area:""}}},components:{},computed:Object(n.b)({user:function(t){return t.user.user},locale:function(){return r.a.locale},isWishlist:function(){var t=this;return!!this.user._id&&(!!this.data.wishlist&&!!this.data.wishlist.find(function(s){return s.user==t.user._id}))},commentCount:function(){return this.data.comments?this.data.comments.length:0},img:function(){return this.data.photos.length>0?this.data.photos[0]:"../static/imgs/house.jpg"},logo:function(){return this.data.provider&&""==this.data.provider.avatar?"../static/imgs/logo.jpg":this.data.provider.avatar},isPraise:function(){var t=this;return!!this.user._id&&(!!this.data.praises&&!!this.data.praises.find(function(s){return s.user._id==t.user._id}))},disabled:function(){return""==this.input.trim()},praiseCount:function(){return this.data.praises?this.data.praises.length:0},lastPraise:function(){var t=this.data.praises.pop();return this.data.praises.push(t),t}}),methods:{onShare:function(){this.dialogShare=!0},onSlide:function(t){console.log("slide item",t)},getData:function(t){var s=this;Object(o.d)({_id:t}).then(function(t){s.data=t,wx.updateAppMessageShareData({title:t.name,desc:t.desc_en,link:"http://store.workspace.h-fish.vip?workspace="+t._id,imgUrl:s.logo,type:"link",success:function(){console.log("分享给朋友成功")},cancel:function(t){},fail:function(t){}}),wx.updateTimelineShareData({title:t.name,desc:t.desc_en,link:"http://store.workspace.h-fish.vip?workspace="+t._id,imgUrl:s.logo,success:function(){},cancel:function(t){},fail:function(t){}})}).catch(function(t){console.log("err",t)})},submit:function(){var t=this;if(!this.disabled)if(this.user._id){var s={_id:this.data._id,comment:{name:this.user.name,avatar:this.user.headimgurl,text:this.input}};Object(o.i)(s).then(function(i){t.input="",t.data.comments||(t.data.comments=[]),t.data.comments.push(s.comment),t.dialogVisible=!0,a.a.success()}).catch(function(t){})}else a()({message:"请先登录 WorkzSpace",type:"error",onClose:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx1020286e395af06c&redirect_uri=http%3A%2F%2Fstore.workspace.h-fish.vip/&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect"}})},wishlist:function(){var t=this;if(this.user._id){var s={_id:this.data._id,user:this.user._id};this.$store.dispatch("workzspace/wishlist",s).then(function(s){t.getUserWish()}).catch(function(t){})}else a()({message:"请先关注并登录 WorkzSpace",type:"error",onClose:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx1020286e395af06c&redirect_uri=http%3A%2F%2Fstore.workspace.h-fish.vip/&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect"}})},getUserWish:function(){var t=this;Object(o.c)({user_id:this.user._id}).then(function(s){t.workzs=s,t.$store.dispatch("workzspace/setUserCount",t.workzs),t.getData(t.data._id)}).catch(function(t){console.log("err",t)})},praise:function(){var t=this;if(this.user._id){var s={_id:this.data._id,user:this.user._id};this.$store.dispatch("workzspace/praise",s).then(function(s){t.getData(t.data._id)}).catch(function(t){})}else a()({message:"请先关注并登录 WorkzSpace",type:"error",onClose:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx1020286e395af06c&redirect_uri=http%3A%2F%2Fstore.workspace.h-fish.vip/&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect"}})},handleClose:function(t){t()}},mounted:function(){},beforeMount:function(){var t=this.$route.query._id;t?this.getData(t):this.$router.go(-1)}},l={render:function(){var t,s=this,i=s.$createElement,e=s._self._c||i;return e("div",{staticClass:"workspace"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-title"},[e("div",{staticClass:"card-logo"},[e("div",{staticClass:"logo-style",style:"background-image: url("+s.logo+")"})]),s._v(" "),e("div",{staticClass:"card-infor"},[e("div",{staticClass:"infor-title"},[s._v(s._s(s.data.name))]),s._v(" "),e("div",[e("i",{staticClass:"el-icon-location icon-style"}),s._v(s._s(""+(s.data.area||""))+" "+s._s(s.data["address_"+s.locale])+s._s(s.data["addresses_"+s.locale]||""))])])]),s._v(" "),e("carousel",{attrs:{"per-page":1,"mouse-drag":!0,paginationEnabled:!1,autoplay:!0,autoplayTimeout:5e3,loop:!0},model:{value:s.slideValue,callback:function(t){s.slideValue=t},expression:"slideValue"}},s._l(s.data.photos,function(t,i){return e("slide",{key:i},[e("div",{staticClass:"card-img img",style:"background-image: url("+t+")"},[e("span",{staticClass:"img-number"},[s._v(s._s(s.slideValue+1)+" / "+s._s(s.data.photos.length))])])])}),1)],1),s._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"icon-box"},[e("div",[e("i",{staticClass:"el-icon-star-off icon-style",class:(t={active:s.isPraise},t["el-icon-star-on"]=s.isPraise,t),on:{click:s.praise}}),s._v(" "),e("i",{staticClass:"el-icon-position icon-style",on:{click:s.onShare}})]),s._v(" "),e("div",{staticClass:"ribbon",class:{red:s.isWishlist},on:{click:s.wishlist}})]),s._v(" "),s.praiseCount>0?e("div",{staticClass:"focus"},[e("div",{staticClass:"img-style"},s._l(s.data.praises,function(t,s){return e("div",{key:s,staticClass:"img-item",style:"background-image: url("+t.user.headimgurl+")"})}),0),s._v(" "),e("div",{staticClass:"text-style"},[s._v("liked by "),e("strong",[s._v(s._s(s.lastPraise.user.nickname))]),s._v(" "+s._s(s.$t("and"))+" "),e("strong",[s._v(s._s(s.praiseCount))]),s._v(" "+s._s(s.$t("others"))+" ")])]):s._e()]),s._v(" "),e("baidu-map",{staticClass:"map",attrs:{zoom:15,center:"上海市"}},[e("bm-local-search",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{keyword:s.data.address_zh||"东方明珠","auto-viewport":!0,location:s.data.area||"黄浦区"}})],1),s._v(" "),e("div",{staticClass:"card-content desc"},[e("h3",[s._v(s._s(s.$t("desc")))]),s._v(" "),e("p",[s._v("\n\t\t\t\t\t"+s._s(s.data["desc_"+s.locale])+"\n\t\t\t\t")])])],1),s._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},s._l(s.data.pricing,function(t,i){return e("div",{key:i,staticClass:"item"},[e("h3",[s._v(s._s(t.name))]),s._v(" "),e("div",{staticClass:"flag"},[e("span",[s._v(s._s(s.$t("start")))]),s._v(" "),e("div",{staticClass:"ribbont",class:{red:i%2==1}},[e("div",{staticClass:"content"},[e("label",[s._v(s._s(t.price))]),s._v(" "),e("span",[s._v(s._s(s.$t("price")))])]),s._v(" "),e("div",{staticClass:"triangle"})])])])}),0)]),s._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("h3",[s._v(s._s(s.$t("question")))]),s._v(" "),e("div",{staticClass:"btn-style",on:{click:function(t){return s.$router.push({path:"contact"})}}},[s._v(s._s(s.$t("button.contact")))])])]),s._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("h3",[s._v("Reviews")]),s._v(" "),e("div",{staticClass:"dialog",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"head-img",style:"background-image: url("+this.user.headimgurl+")"}),s._v(" "),e("el-input",{attrs:{placeholder:"Write Your Comment"},model:{value:s.input,callback:function(t){s.input=t},expression:"input"}}),s._v(" "),e("span",{on:{click:s.submit}},[s._v(s._s(s.$t("post")))])],1),s._v(" "),s._l(s.data.comments,function(t,i){return e("div",{staticClass:"reviews"},[e("div",{staticClass:"avatar",style:"background-image: url("+t.avatar+")"}),s._v(" "),e("div",{staticClass:"content"},[e("h4",[s._v(s._s(t.name))]),s._v(" "),e("p",[s._v("\n\t\t\t\t\t\t\t"+s._s(t.text)+"\n\t\t\t\t\t\t")])])])}),s._v(" "),e("div",{staticClass:"views"},[e("strong",[s._v(s._s(s.$t("view"))+" "+s._s(s.commentCount)+" "+s._s(s.$t("comments")))])])],2)]),s._v(" "),e("el-dialog",{attrs:{visible:s.dialogVisible,width:"80%","before-close":s.handleClose},on:{"update:visible":function(t){s.dialogVisible=t}}},[e("span",[s._v("Thanks for you review! Once your opinion has been reviewed it will be posted."),e("br"),s._v(" 感谢您的评论！ 审核您的意见后，它将被发布。")]),e("br"),s._v(" "),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){s.dialogVisible=!1}}})],1),s._v(" "),e("el-dialog",{attrs:{"show-close":!1,visible:s.dialogShare,width:"80%","before-close":s.handleClose},on:{"update:visible":function(t){s.dialogShare=t}}},[e("span",[s._v("Please click the button in the top right corner of WeChat to share."),e("br"),s._v(" 请点击微信右上角的按钮分享哦。")]),e("br"),s._v(" "),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){s.dialogShare=!1}}},[s._v(s._s(s.$t("button.enter")))])],1)],1)},staticRenderFns:[]};var d=i("VU/8")(c,l,!1,function(t){i("G4Eo")},"data-v-2795f109",null);s.default=d.exports}});
//# sourceMappingURL=7.affe65decb4c7695b75a.js.map